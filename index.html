<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ“¡ Online Monitor TH2-TH5</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
  min-height:100vh;
  background:linear-gradient(135deg,#667eea,#764ba2);
}
.glass{
  background:rgba(255,255,255,.15);
  backdrop-filter:blur(15px);
  border:1px solid rgba(255,255,255,.25);
}
</style>
</head>

<body class="p-4 text-white">

<h1 class="text-2xl font-bold text-center mb-4">
  ðŸ“Š à¸£à¸°à¸šà¸šà¹€à¸Šà¹‡à¸„à¸„à¸™à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ
</h1>

<div id="servers" class="grid gap-4 md:grid-cols-2"></div>

<script>
const servers = [
  { name: "TH2", url: "http://82.26.104.151:5555/server/online_app.json" },
  { name: "TH3", url: "http://82.26.104.196:5555/server/online_app.json" },
  { name: "TH4", url: "http://82.26.104.197:5555/server/online_app.json" },
  { name: "TH5", url: "http://82.26.104.199:5555/server/online_app.json" },
];

async function loadServers(){
  const container = document.getElementById("servers");
  container.innerHTML = "";

  for(const s of servers){
    try{
      const res = await fetch(s.url);
      const data = await res.json();

      const users = data.users || data.online || [];
      const count = Array.isArray(users) ? users.length : data.total || 0;

      container.innerHTML += `
        <div class="glass rounded-xl p-4 shadow-lg">
          <h2 class="text-xl font-bold mb-2">ðŸŸ¢ ${s.name}</h2>
          <p class="mb-2">ðŸ‘¥ à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ: <b>${count}</b> à¸„à¸™</p>
          <div class="text-sm max-h-32 overflow-auto">
            ${
              Array.isArray(users) && users.length
              ? users.map(u=>`â€¢ ${u}`).join("<br>")
              : "à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰"
            }
          </div>
        </div>
      `;
    }catch(e){
      container.innerHTML += `
        <div class="glass rounded-xl p-4 border border-red-400">
          <h2 class="text-xl font-bold">ðŸ”´ ${s.name}</h2>
          <p>à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹„à¸¡à¹ˆà¹„à¸”à¹‰</p>
        </div>
      `;
    }
  }
}

loadServers();
setInterval(loadServers,10000);
</script>

</body>
</html>
